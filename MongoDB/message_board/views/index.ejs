<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Message Board</title>
    <style>
      h1{
        display: inline-block;
        margin: 10px 5px;
      }
      form{
        margin: 20px;
      }
      form label{
        display: block;
      }
      form div{
        margin: 5px 0;
      }
      .message, .comment{
        width: 100%;
      }
      button{
        float: right;
      }
      .post{
        margin: 10px 40px;
      }
    </style>
  </head>
  <body>
    <h1>The Dojo Message Board</h1>
    <hr>
    <form action="/postMessage" method='post'>
      <div><label for="">Name:</label><input type="text" name='name'></div>
      <div>
        <label for="">Message:</label>
        <textarea name="message" class='message' cols="30" rows="10"></textarea>
      </div>
      <button>Post Message</button>
    </form>
    <ul>
      <% for(const error of errors) { %>
        <li><%= error %></li>
      <% } %>
    </ul>
    <% for(const post of posts) { %>
      <div class='post'>
        <h2>Name: <%= post.name %></h2>
        <h3>Message: <%= post.text %></h3>
        <% for(const comment of post.comments) { %>
          <div class="comment">
            <h4>Name: <%= comment.name %></h4>
            <h4>Comment: <%= comment.text %></h4>
          </div>
        <% } %>
        <form action="/postComment/<%=post.id%>" method='post'>
          <div><label for="">Name:</label><input type="text" name='name'></div>
          <div>
            <label for="">Comment:</label>
            <textarea name="comment" class="comment" cols="30" rows="10"></textarea></div>
          <button>Post Comment</button>
        </form>
      </div>
    <% } %>
  </body>
</html>
